<!DOCTYPE html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <script src="./apollonius.js"></script>

    <script>
        function setup(){
            createCanvas(600,600);
            background(255);
            stroke(0);
            noFill();
            let data = [];
            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    let x = 60 + i * 60 + random(-20,20);
                    let y = 60 + j * 60 + random(-20,20);
                    let w = random(5,30);
                    circle(x,y,w*2);
                    data.push(x,y,w);
                }
            }

            for (let i = 0; i < data.length/3; i++) {
                circle(data[i*3], data[i*3 + 1], data[i*3+2] * 2);
            }
            let g = new Apollonius(width, height);
            g.setSites(data, true);
            g.setScanGap(5);
            g.build();
            stroke(255,0,0);
            for (let i = 0; i < g.bisectors.length; i++) {
                const sec = g.bisectors[i];
                for (let j = 1; j < sec.length; j++) {
                    line(sec[j][0], sec[j][1],sec[j-1][0],sec[j-1][1]);
                    
                }
            }
        }
    </script>
</head>